<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" href="./favicon.png" />
		<meta name="viewport" content="width=device-width" />
		
		<link href="./_app/immutable/assets/0.e9fdb454.css" rel="stylesheet">
		<link href="./_app/immutable/assets/2.c104192f.css" rel="stylesheet">
		<link rel="modulepreload" href="./_app/immutable/entry/start.944fe4aa.js">
		<link rel="modulepreload" href="./_app/immutable/chunks/index.6ff9695e.js">
		<link rel="modulepreload" href="./_app/immutable/chunks/singletons.8819c619.js">
		<link rel="modulepreload" href="./_app/immutable/chunks/index.537af74c.js">
		<link rel="modulepreload" href="./_app/immutable/entry/app.3c3d6fe5.js">
		<link rel="modulepreload" href="./_app/immutable/nodes/0.0b94de3a.js">
		<link rel="modulepreload" href="./_app/immutable/nodes/2.e14736d2.js">
	</head>
	<body data-sveltekit-preload-data="hover">
		<div style="display: contents">


<p class="text svelte-fmgthi">amd64 sysv calling convention
</p>

<div id="main" class="svelte-fmgthi"><div><table class="frame svelte-19jicr"><tr><td><table style="width: 100%;"><tr><td><span class="type">char</span></td>
                    <td></td>
                    <td style="text-align: right;"><span class="text">size</span>
                        <span class="num">1</span>
                        <span class="text">| align</span>
                        <span class="num">1</span></td></tr></table></td></tr>
    
    <tr><td><span class="text">8 bytes:</span></td></tr>
    <tr><td><table><tr><td style="min-width: 2ch;"></td>
                <td style="min-width: 4ch;"><span class="num">#0</span></td>
                <td><span class="type">INTEGER</span></td>
            </tr></table></td></tr>
    
</table><table class="frame svelte-19jicr"><tr><td><table style="width: 100%;"><tr><td><span class="type">short</span></td>
                    <td></td>
                    <td style="text-align: right;"><span class="text">size</span>
                        <span class="num">2</span>
                        <span class="text">| align</span>
                        <span class="num">2</span></td></tr></table></td></tr>
    
    <tr><td><span class="text">8 bytes:</span></td></tr>
    <tr><td><table><tr><td style="min-width: 2ch;"></td>
                <td style="min-width: 4ch;"><span class="num">#0</span></td>
                <td><span class="type">INTEGER</span></td>
            </tr></table></td></tr>
    
</table><table class="frame svelte-19jicr"><tr><td><table style="width: 100%;"><tr><td><span class="type">int</span></td>
                    <td></td>
                    <td style="text-align: right;"><span class="text">size</span>
                        <span class="num">4</span>
                        <span class="text">| align</span>
                        <span class="num">4</span></td></tr></table></td></tr>
    
    <tr><td><span class="text">8 bytes:</span></td></tr>
    <tr><td><table><tr><td style="min-width: 2ch;"></td>
                <td style="min-width: 4ch;"><span class="num">#0</span></td>
                <td><span class="type">INTEGER</span></td>
            </tr></table></td></tr>
    
</table><table class="frame svelte-19jicr"><tr><td><table style="width: 100%;"><tr><td><span class="type">long</span></td>
                    <td></td>
                    <td style="text-align: right;"><span class="text">size</span>
                        <span class="num">8</span>
                        <span class="text">| align</span>
                        <span class="num">8</span></td></tr></table></td></tr>
    
    <tr><td><span class="text">8 bytes:</span></td></tr>
    <tr><td><table><tr><td style="min-width: 2ch;"></td>
                <td style="min-width: 4ch;"><span class="num">#0</span></td>
                <td><span class="type">INTEGER</span></td>
            </tr></table></td></tr>
    
</table><table class="frame svelte-19jicr"><tr><td><table style="width: 100%;"><tr><td><span class="type">float</span></td>
                    <td></td>
                    <td style="text-align: right;"><span class="text">size</span>
                        <span class="num">4</span>
                        <span class="text">| align</span>
                        <span class="num">4</span></td></tr></table></td></tr>
    
    <tr><td><span class="text">8 bytes:</span></td></tr>
    <tr><td><table><tr><td style="min-width: 2ch;"></td>
                <td style="min-width: 4ch;"><span class="num">#0</span></td>
                <td><span class="type">SSE</span></td>
            </tr></table></td></tr>
    
</table><table class="frame svelte-19jicr"><tr><td><table style="width: 100%;"><tr><td><span class="type">double</span></td>
                    <td></td>
                    <td style="text-align: right;"><span class="text">size</span>
                        <span class="num">8</span>
                        <span class="text">| align</span>
                        <span class="num">8</span></td></tr></table></td></tr>
    
    <tr><td><span class="text">8 bytes:</span></td></tr>
    <tr><td><table><tr><td style="min-width: 2ch;"></td>
                <td style="min-width: 4ch;"><span class="num">#0</span></td>
                <td><span class="type">SSE</span></td>
            </tr></table></td></tr>
    
</table>

<div style="margin: 4px;"><button>+</button>
    <button>-</button></div></div>
    <div style="flex-grow: 2; padding-left: 32px;"><div><div class="frame svelte-6n32qs"><p><span class="type">void</span>
        <span class="text">foo(</span>
        
        <button>+</button>
        <button>-</button>
        <span class="text">);</span></p>
</div></div>
        <div style="height: 32px;"></div>
        <div><table class="frame" style="border-spacing: 0px;"><tr><td class="svelte-1hgub3f"><div class="hdr text svelte-1hgub3f" style="min-width: 16ch;">gp regs</div>
            <br>
            <div><span class="text">%rdi:</span>
                </div><div><span class="text">%rsi:</span>
                </div><div><span class="text">%rdx:</span>
                </div><div><span class="text">%rcx:</span>
                </div><div><span class="text">%r8:</span>
                </div><div><span class="text">%r9:</span>
                </div></td>
        <td class="svelte-1hgub3f"><div class="hdr text svelte-1hgub3f" style="min-width: 16ch;">fp regs</div>
            <br>
            <div><span class="text">%xmm0:</span>
                </div><div><span class="text">%xmm1:</span>
                </div><div><span class="text">%xmm2:</span>
                </div><div><span class="text">%xmm3:</span>
                </div><div><span class="text">%xmm4:</span>
                </div><div><span class="text">%xmm5:</span>
                </div><div><span class="text">%xmm6:</span>
                </div><div><span class="text">%xmm7:</span>
                </div></td>
        <td class="svelte-1hgub3f"><div class="hdr text svelte-1hgub3f" style="min-width: 16ch;">stack</div>
            <br></td></tr>
</table></div>
        <div style="height: 32px;"></div>
        <div><div class="frame svelte-1o8gqrm"><p class="type svelte-1o8gqrm" id="title">Notes</p>
    <p class="type svelte-1o8gqrm" id="subtitle">(from the AMD64 SysV ABI)</p>
    <p class="text svelte-1o8gqrm">Arguments are first classified into classes that have
        corresponding amd64 registers.
    </p>
    <p class="text svelte-1o8gqrm">These are:
    </p>
    <table class="text svelte-1o8gqrm"><tr><td>INTEGER</td>
            <td>-</td>
            <td>types that fit into general purpose registers</td></tr>
        <tr><td>SSE</td>
            <td>-</td>
            <td>types that fit into vector registers</td></tr>
        <tr><td>SSEUP</td>
            <td>-</td>
            <td>types that fit into the upper bytes of vector registers</td></tr>
        <tr><td>MEMORY</td>
            <td>-</td>
            <td>types to be passed on the stack</td></tr></table>
    <p class="text svelte-1o8gqrm">(n.b. there are more classes for more complex unimplemented types)
    </p>
    <p class="text svelte-1o8gqrm">Classification:
    </p>
    <p class="text svelte-1o8gqrm">Arguments are rounded up to 8 bytes (8-bytes from now on).
    </p>
    <p class="text svelte-1o8gqrm">Scalars are assigned the following classes:
    </p>
    <ul class="text svelte-1o8gqrm"><li>char, short, int, long, long long and pointers
            are classified as INTEGER
        </li>
        <li>float and double are classified as SSE
        </li></ul>
    <p class="text svelte-1o8gqrm">Classification of aggregate types:
    </p>
    <ol class="text svelte-1o8gqrm"><li>If the object is larger than four 8-bytes, or if it contains
            unaligned fields it is classified as MEMORY.
        </li>
        <li>If the size of the object is larger than a single 8-byte then
            each 8-byte gets classified individually. The initial class
            of each 8-byte is set to NO_CLASS.
        </li>
        <li>The class of an 8-byte is determined by recursively combining
            the classes of the fields of an object that overlap this 8-byte.
            <ol><li>If both classes are equal, this is the resulting class.</li>
                <li>If one class is NO_CLASS, the result is the other class.</li>
                <li>If one class is MEMORY, the result is MEMORY.</li>
                <li>If one class is INTEGER, the result is INTEGER.</li>
                <li>Otherwise the class is SSE.</li></ol></li></ol>
    <p class="text svelte-1o8gqrm">Post-processing for aggregate types:
    </p>
    <ul class="text svelte-1o8gqrm"><li>If one of the classes is MEMORY then the entire argument
            is passed in memory.
        </li>
        <li>If the size of the object is larger than two 8-bytes
            and the first 8-byte isn&#39;t SSE and if any other 8-byte isn&#39;t
            SSEUP then the whole object is passed in memory.
        </li>
        <li>If SSEUP is not preceded by SSE or SSEUP, it is converted to SSE.
        </li></ul>
    <p class="text svelte-1o8gqrm">After classification arguments are assigned their registers in order.
    </p>
    <ul class="text svelte-1o8gqrm"><li>If the class is MEMORY, pass it on the stack.</li>
        <li>If the class is INTEGER, pick the next available register
            from the list:
                <ul><li>%rdi, %rsi, %rdx, %rcx, %r8, %r9,</li></ul></li>
        <li>If the class is SSE, pick the next available register
            from %xmm0 to %xmm7
        </li>
        <li>If the class is SSEUP, pick the next available 8-byte in the
            last used vector register.
        </li>
        <li>If there are no more registers available for any 8-byte of an
            object, pass the entire object in memory. Previous register
            assignments are discarded.
        </li></ul>
    <p class="text svelte-1o8gqrm">After registers are assigned, the arguments passed in memory get
        pushed onto the stack in reverse order.
    </p>
    <p class="text svelte-1o8gqrm">*** This is how I understood the ABI. Not necessarily correct.
    </p>
</div></div></div>
</div>


			
			<script>
				{
					__sveltekit_1iktwu1 = {
						base: new URL(".", location).pathname.slice(0, -1),
						env: {}
					};

					const element = document.currentScript.parentElement;

					const data = [null,null];

					Promise.all([
						import("./_app/immutable/entry/start.944fe4aa.js"),
						import("./_app/immutable/entry/app.3c3d6fe5.js")
					]).then(([kit, app]) => {
						kit.start(app, element, {
							node_ids: [0, 2],
							data,
							form: null,
							error: null
						});
					});
				}
			</script>
		</div>
	</body>
</html>
